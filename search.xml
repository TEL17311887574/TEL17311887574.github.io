<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>测试</title>
      <link href="/post/9daba997.html"/>
      <url>/post/9daba997.html</url>
      
        <content type="html"><![CDATA[<p>w我我我我我啊大大啊我我阿文我我啊大大伟大挖的啊大大我爱我的</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium.webdriver <span class="keyword">import</span> Chrome, ChromeOptions</span><br><span class="line"><span class="keyword">import</span> zipfile</span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_ip</span>():</span><br><span class="line">    api_url = <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        resp1 = requests.get(url=api_url, timeout=<span class="number">5</span>).text</span><br><span class="line">        <span class="comment"># print(resp1)</span></span><br><span class="line">        proxies = resp1.split(<span class="string">&#x27;&lt;br/&gt;&#x27;</span>)  <span class="comment"># 这里的API提取链接是返回的text文本格式，以\r\n分割 获取IP列表，还可以返回JSON，XML格式</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&#x27;目前伪装IP:&#x27;</span>)</span><br><span class="line">            <span class="keyword">for</span> pro <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(proxies)):</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&#x27;ip<span class="subst">&#123;pro + <span class="number">1</span>&#125;</span>:<span class="subst">&#123;<span class="built_in">list</span>(<span class="built_in">eval</span>(proxies[pro]).values())[<span class="number">1</span>]&#125;</span>&#x27;</span>)</span><br><span class="line">            p = <span class="built_in">list</span>(<span class="built_in">eval</span>(proxies[<span class="number">0</span>]).values())[<span class="number">1</span>]</span><br><span class="line">            <span class="built_in">print</span>(p)</span><br><span class="line">            b = re.findall(<span class="string">r&#x27;@(.*)&#x27;</span>, p)[<span class="number">0</span>]  <span class="comment">#</span></span><br><span class="line">            PROXY_HOST = re.findall(<span class="string">r&#x27;(.*):&#x27;</span>, b)[<span class="number">0</span>]</span><br><span class="line">            PROXY_PORT = re.findall(<span class="string">r&#x27;:(\d+)&#x27;</span>, b)[<span class="number">0</span>]  <span class="comment">#</span></span><br><span class="line">            use_http(PROXY_HOST, PROXY_PORT)</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&#x27;ip获取出现问题，正在重试---<span class="subst">&#123;e&#125;</span>&#x27;</span>)</span><br><span class="line">            time.sleep(<span class="number">10</span>)</span><br><span class="line">            get_ip()</span><br><span class="line">        <span class="keyword">return</span> proxies</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">use_http</span>(<span class="params">PROXY_HOST, PROXY_PORT</span>):</span><br><span class="line">    PROXY_HOST = PROXY_HOST  <span class="comment"># rotating proxy or host</span></span><br><span class="line">    PROXY_PORT = PROXY_PORT  <span class="comment"># port</span></span><br><span class="line">    PROXY_USER = <span class="string">&#x27;&#x27;</span>  <span class="comment"># username</span></span><br><span class="line">    PROXY_PASS = <span class="string">&#x27;&#x27;</span>  <span class="comment"># password</span></span><br><span class="line"></span><br><span class="line">    manifest_json = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">        &quot;version&quot;: &quot;1.0.0&quot;,</span></span><br><span class="line"><span class="string">        &quot;manifest_version&quot;: 2,</span></span><br><span class="line"><span class="string">        &quot;name&quot;: &quot;Chrome Proxy&quot;,</span></span><br><span class="line"><span class="string">        &quot;permissions&quot;: [</span></span><br><span class="line"><span class="string">            &quot;proxy&quot;,</span></span><br><span class="line"><span class="string">            &quot;tabs&quot;,</span></span><br><span class="line"><span class="string">            &quot;unlimitedStorage&quot;,</span></span><br><span class="line"><span class="string">            &quot;storage&quot;,</span></span><br><span class="line"><span class="string">            &quot;&lt;all_urls&gt;&quot;,</span></span><br><span class="line"><span class="string">            &quot;webRequest&quot;,</span></span><br><span class="line"><span class="string">            &quot;webRequestBlocking&quot;</span></span><br><span class="line"><span class="string">        ],</span></span><br><span class="line"><span class="string">        &quot;background&quot;: &#123;</span></span><br><span class="line"><span class="string">            &quot;scripts&quot;: [&quot;background.js&quot;]</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        &quot;minimum_chrome_version&quot;:&quot;22.0.0&quot;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    background_js = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    var config = &#123;</span></span><br><span class="line"><span class="string">            mode: &quot;fixed_servers&quot;,</span></span><br><span class="line"><span class="string">            rules: &#123;</span></span><br><span class="line"><span class="string">            singleProxy: &#123;</span></span><br><span class="line"><span class="string">                scheme: &quot;http&quot;,</span></span><br><span class="line"><span class="string">                host: &quot;%s&quot;,</span></span><br><span class="line"><span class="string">                port: parseInt(%s)</span></span><br><span class="line"><span class="string">            &#125;,</span></span><br><span class="line"><span class="string">            bypassList: [&quot;localhost&quot;]</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        &#125;;</span></span><br><span class="line"><span class="string">    chrome.proxy.settings.set(&#123;value: config, scope: &quot;regular&quot;&#125;, function() &#123;&#125;);</span></span><br><span class="line"><span class="string">    function callbackFn(details) &#123;</span></span><br><span class="line"><span class="string">        return &#123;</span></span><br><span class="line"><span class="string">            authCredentials: &#123;</span></span><br><span class="line"><span class="string">                username: &quot;%s&quot;,</span></span><br><span class="line"><span class="string">                password: &quot;%s&quot;</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        &#125;;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    chrome.webRequest.onAuthRequired.addListener(</span></span><br><span class="line"><span class="string">                callbackFn,</span></span><br><span class="line"><span class="string">                &#123;urls: [&quot;&lt;all_urls&gt;&quot;]&#125;,</span></span><br><span class="line"><span class="string">                [&#x27;blocking&#x27;]</span></span><br><span class="line"><span class="string">    );</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span> % (PROXY_HOST, PROXY_PORT, PROXY_USER, PROXY_PASS)</span><br><span class="line"></span><br><span class="line">    pluginfile = <span class="string">&#x27;proxy_auth_plugin.zip&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> zipfile.ZipFile(pluginfile, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> zp:</span><br><span class="line">        zp.writestr(<span class="string">&quot;manifest.json&quot;</span>, manifest_json)</span><br><span class="line">        zp.writestr(<span class="string">&quot;background.js&quot;</span>, background_js)</span><br><span class="line"></span><br><span class="line">    chrome_options = webdriver.ChromeOptions()</span><br><span class="line">    chrome_options.add_extension(pluginfile)</span><br><span class="line">    chrome_options.add_experimental_option(<span class="string">&#x27;excludeSwitches&#x27;</span>, [<span class="string">&#x27;enable-automation&#x27;</span>])</span><br><span class="line">    chrome_options.add_argument(<span class="string">&quot;disable-blink-features=AutomationControlled&quot;</span>)</span><br><span class="line">    driver = webdriver.Chrome(options=chrome_options)</span><br><span class="line">    driver.get(<span class="string">&#x27;https://item.taobao.com/item.htm?id=639083517407&#x27;</span>)</span><br><span class="line">    <span class="built_in">input</span>()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    get_ip()</span><br></pre></td></tr></table></figure><p>测试测试测试测试</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/post/4a17b156.html"/>
      <url>/post/4a17b156.html</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
